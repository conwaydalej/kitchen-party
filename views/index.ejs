<% include partials/head.ejs %>
<% notes = [
    ['C', ["C3", "E3", "G3"]],
    ['C1', 'C3'],
    ['C2', 'E3'],
    ['C3', 'G3'],

    ['G', ["G3", "B3", "D4"]],
    ['G1', 'G3'],
    ['G2', 'B3'],
    ['G3', 'D4'],

    ['Am', ["A3", "C4", "E4"]],
    ['Am1', 'A3'],
    ['Am2', 'C4'],
    ['Am3', 'E4'],

    ['F', ["F3", "A3", "C4"]],
    ['F1', 'F3'],
    ['F2', 'A3'],
    ['F3', 'C4']
];

%>

<h3>Notes:</h3>
<% notes.forEach(function(note, i, arr){ %>
<br/><label><%= note[0] %>
    <input type="radio" name="note" value="<%= i %>">
</label>
<% }); %>


<button class="play">Play</button>


<script>
    var synth1 = new Tone.PolySynth(3, Tone.Synth).toMaster();


    var synth1 = new Tone.Synth().toMaster();

    synth1.set({
        "envelope" : {
            "release" : 1.5,
        },
        "portamento" : 0.05
    });


    notes = [
        ['C', ["C3", "E3", "G3"]],
        ['C1', 'C3'],
        ['C2', 'E3'],
        ['C3', 'G3'],

        ['G', ["G3", "B3", "D4"]],
        ['G1', 'G3'],
        ['G2', 'B3'],
        ['G3', 'D4'],

        ['Am', ["A3", "C4", "E4"]],
        ['Am1', 'A3'],
        ['Am2', 'C4'],
        ['Am3', 'E4'],

        ['F', ["F3", "A3", "C4"]],
        ['F1', 'F3'],
        ['F2', 'A3'],
        ['F3', 'C4']
    ];

jQuery(function ($){



 $('.play').on('mousedown',function(){
     var val = parseInt($('input[name=note]:checked').val());
     //console.log(val);
     synth1.triggerAttack(notes[val][1]);
 })
    $('.play').on('mouseup',function(){
        console.log('test');
        synth1.triggerRelease();
    })
})

</script>