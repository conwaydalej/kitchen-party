<% include partials/head.ejs %>
    <script>
        var socket = io();
        $(function () {

            var synth1 = new Tone.PolySynth(3, Tone.Synth,{
                "envelope": {
                    "attack": 0.01,
                    "decay": 0.1,
                    "sustain": 0.5,
                    "release": 0.4,
                    "attackCurve" : "exponential"
                },
            }).toMaster();

/*            synth1.set({
                "envelope" : {
                    "attack" : 1.5,
                    "release" : 1.5,
                }
            });*/


            var notes = [
                ['C', ["C3", "E3", "G3"]],
                ['C1', 'C3'],
                ['C2', 'E3'],
                ['C3', 'G3'],

                ['G', ["G3", "B3", "D4"]],
                ['G1', 'G3'],
                ['G2', 'B3'],
                ['G3', 'D4'],

                ['Am', ["A3", "C4", "E4"]],
                ['Am1', 'A3'],
                ['Am2', 'C4'],
                ['Am3', 'E4'],

                ['F', ["F3", "A3", "C4"]],
                ['F1', 'F3'],
                ['F2', 'A3'],
                ['F3', 'C4']
            ];


            socket.on('startnote', function(msg){
                console.log('start' + msg);
                synth1.triggerAttack(
                    notes[parseInt(msg)][1]
                );
                synth1.triggerAttack(
                    notes[parseInt(msg)][1]
                );
            });
            socket.on('stopnote', function(msg){
                console.log('stop' + msg);
                synth1.triggerRelease(
                    notes[parseInt(msg)][1]
                );
            });
        });
    </script>



</head>
<body>
<ul id="messages"></ul>
</body>
</html>